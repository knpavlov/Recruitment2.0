# Архитектура Recruitment 2.0

Документ описывает стартовую модульную структуру проекта и ключевые принципы развития.

## Общие принципы

- Чёткое разделение слоёв: UI, состояние, сервисы и инфраструктура.
- Возможность вынесения бизнес-логики в независимые пакеты для будущей миграции на Unity.
- Использование TypeScript как единого языка для фронтенда и бэкенда.

## Фронтенд

- `src/app` — базовая компоновка приложения и навигация.
- `src/components` — переиспользуемые визуальные компоненты без бизнес-логики.
- `src/modules` — экраны и их состояние.
- `src/shared` — типы, утилиты и UI-заглушки.
- Стили размещены в `src/styles` и подключаются по CSS-модулям.

## Бэкенд

- `src/app` — точка входа Express и регистрация маршрутов.
- `src/modules` — отдельные домены (аккаунты, кейсы, кандидаты, оценки, вопросы, аутентификация).
- `src/shared` — общие элементы инфраструктуры (например, health-check).
- В сервисах используется слой репозиториев, который инкапсулирует работу с PostgreSQL через пул подключений.
- При запуске сервера выполняются лёгкие миграции: создаются таблицы и добавляется суперадмин.
- Для деплоя используется `nixpacks`-конфигурация `.nixpacks.toml`, которая устанавливает зависимости через `npm install` и прогоняет сборку до старта сервера.

## Следующие шаги

1. Вынести миграции в полноценный инструмент (например, `node-pg-migrate` или Prisma) и добавить контроль версий схемы.
2. Подключить очередь писем и интеграцию с провайдером рассылок.
3. Перенести одноразовые коды и сессии в постоянное хранилище с учётом масштабирования.
4. Интегрировать реальный API ИИ для разбора резюме и сопоставления навыков.
5. Добавить оптимистичные блокировки и синхронизацию через WebSocket для уведомлений об обновлениях.
